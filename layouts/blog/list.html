{{- define "title" }}博客文章 - {{ .Site.Title }}{{ end -}}

{{- define "main" -}}
    {{- /* 加载页 */ -}}
    {{ partial "loading.html" . }}

    <div class="page-container">
    {{- /* 侧边栏 */ -}}
    {{ partial "sidebar.html" . }}

        <div class="main-content flex-fill d-flex flex-column">
            {{- /* 导航栏 */ -}}
            {{ partial "navbar.html" . }}

            {{- /* 内容 */ -}}
            <div class="page single special blog-container flex-fill overflow-auto">
                <div class="blog-header">
                    <h1 class="blog-title animate__animated animate__fadeIn">博客文章</h1>
                    
                    <!-- 分类标签选择按钮 -->
                    <div class="blog-categories">
                        <a href="{{ "blog/" | relURL }}" class="category-btn active">全部</a>
                        {{ range $name, $items := .Site.Taxonomies.categories }}
                        <a href="{{ "categories/" | relURL }}{{ $name | urlize }}" class="category-btn">{{ $name }}</a>
                        {{ end }}
                    </div>
                </div>
                
                <!-- 博客文章列表 -->
                <div class="blog-grid">
                    {{ $postPages := where .Site.RegularPages "Section" "post" }}
                    {{ if gt (len $postPages) 0 }}
                        {{ range $postPages }}
                        <div class="blog-card">
                            <a href="{{ .RelPermalink }}" class="blog-card-link">
                                <div class="blog-card-image">
                                    {{ if .Params.cover }}
                                    <img src="{{ .Params.cover | relURL }}" alt="{{ .Title }}">
                                    {{ else }}
                                    <img src="{{ "images/default-cover.jpg" | relURL }}" alt="{{ .Title }}">
                                    {{ end }}
                                </div>
                                <div class="blog-card-content">
                                    <h3 class="blog-card-title">{{ .Title }}</h3>
                                    <div class="blog-card-date">
                                        <i class="far fa-calendar-alt fa-fw"></i>
                                        <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "2006-01-02" }}</time>
                                    </div>
                                </div>
                            </a>
                        </div>
                        {{ end }}
                    {{ else }}
                        <div class="blog-empty">
                            <p>暂时没有文章。</p>
                        </div>
                    {{ end }}
                </div>
            </div>
        </div>
    </div>
{{- end -}}
