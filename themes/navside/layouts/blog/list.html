{{- define "title" }}博客文章 - {{ .Site.Title }}{{ end -}}

{{- define "main" -}}
    {{- /* 加载页 */ -}}
    {{ partial "loading.html" . }}

    <div class="page-container">
    {{- /* 侧边栏 */ -}}
    {{ partial "sidebar.html" . }}

        <div class="main-content article flex-fill not">
            {{- /* 导航栏 */ -}}
            {{ partial "navbar.html" . }}

            {{- /* 内容 */ -}}
            <div class="page single special blog-container">
                <div class="blog-header">
                    <h1 class="blog-title animate__animated animate__fadeIn">博客文章</h1>
                    
                    <!-- 分类标签选择按钮 -->
                    <div class="blog-categories">
                        <a href="{{ "blog/" | relURL }}" class="category-btn {{ if not $.Data.Term }}active{{ end }}">全部</a>
                        {{ range $name, $items := .Site.Taxonomies.categories }}
                        <a href="{{ "categories/" | relURL }}{{ $name | urlize }}" class="category-btn {{ if eq $.Data.Term $name }}active{{ end }}">{{ $name }}</a>
                        {{ end }}
                    </div>
                </div>
                
                <!-- 博客文章列表 -->
                <div class="blog-grid">
                    {{ $postPages := where .Site.RegularPages "Section" "post" }}
                    {{ $paginator := .Paginate $postPages 30 }}
                    {{ if gt (len $postPages) 0 }}
                        {{ range $paginator.Pages }}
                        <div class="blog-card">
                            <a href="{{ .RelPermalink }}" class="blog-card-link">
                                <div class="blog-card-image">
                                    {{ if .Params.cover }}
                                    <img src="{{ .Params.cover }}" alt="{{ .Title }}">
                                    {{ else }}
                                    <img src="{{ "images/default-cover.jpg" | relURL }}" alt="{{ .Title }}">
                                    {{ end }}
                                </div>
                                <div class="blog-card-content">
                                    <h3 class="blog-card-title">{{ .Title }}</h3>
                                    <div class="blog-card-date">
                                        <i class="far fa-calendar-alt fa-fw"></i>
                                        <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "2006-01-02" }}</time>
                                    </div>
                                </div>
                            </a>
                        </div>
                        {{ end }}
                    {{ else }}
                        <div class="blog-empty">
                            <p>暂时没有文章。</p>
                        </div>
                    {{ end }}
                </div>
                
                <!-- 分页导航 -->
                <div class="blog-pagination">
                    {{ if $paginator.HasPrev }}
                    <a href="{{ $paginator.Prev.URL }}" class="pagination-btn prev-btn">
                        <i class="fas fa-chevron-left"></i> 上一页
                    </a>
                    {{ end }}
                    
                    {{ range $paginator.Pagers }}
                    <a href="{{ .URL }}" class="pagination-btn page-number {{ if eq . $paginator }}active{{ end }}">
                        {{ .PageNumber }}
                    </a>
                    {{ end }}
                    
                    {{ if $paginator.HasNext }}
                    <a href="{{ $paginator.Next.URL }}" class="pagination-btn next-btn">
                        下一页 <i class="fas fa-chevron-right"></i>
                    </a>
                    {{ end }}
                    
                    {{ if ne $paginator.PageNumber $paginator.TotalPages }}
                    <a href="{{ $paginator.Last.URL }}" class="pagination-btn last-btn">
                        末页 <i class="fas fa-forward"></i>
                    </a>
                    {{ end }}
                </div>
            </div>
        </div>
    </div>
{{- end -}}
